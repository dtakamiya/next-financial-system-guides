# 第1章：はじめに - 複雑な金融システムに立ち向かうために

## このガイドが目指すもの

この開発ガイドは、現代の複雑な金融システムの開発に携わる、あるいはこれから挑戦しようとする開発者のための実践的な羅針盤です。

私たちのゴールは、単に動くソフトウェアを作ることではありません。ビジネスの変化に迅速かつ柔軟に対応でき、長期的にメンテナンス可能で、そして何よりも堅牢で安全な金融システムを構築するための設計思想と具体的な技術を身につけることです。

このガイドを最後まで読み終えたとき、あなたは以下のスキルと知識を手にしているはずです。

-   **ドメイン駆動設計（DDD）** の思想に基づき、複雑な金融ビジネスのルールを正確にコードに表現できる。
-   **マイクロサービスアーキテクチャ**の利点を活かし、スケール可能で自律的なサービスを設計・開発できる。
-   **オニオンアーキテクチャ**を用いて、ビジネスの核となるロジックを技術的負債から保護できる。
-   **Java 17、Spring Boot、MyBatis、Spock** といったモダンな技術スタックを使いこなし、高品質なコードを記述できる。
-   **Testcontainers**や**契約テスト**といった最新のテスト手法を導入し、システムの信頼性を高めることができる。

## なぜDDDとマイクロサービスか？

金融システムは、その性質上、非常に複雑です。金利計算、与信審査、取引マッチング、コンプライアンスチェックなど、多岐にわたる専門知識と厳格なルールが絡み合っています。

従来の巨大な一枚岩（モノリシック）なシステムでは、こうした複雑性がコードベース全体に広がり、一つの修正が予期せぬ副作用を生んだり、新しい機能の追加に膨大な時間がかかったりといった問題が生じがちです。

ここで強力な武器となるのが **DDD** と **マイクロサービス** です。

-   **ドメイン駆動設計 (DDD)** は、ビジネスの専門家と開発者が共通の言語（ユビキタス言語）を使い、ビジネスの構造（ドメイン）をそのままコードに反映させるアプローチです。これにより、複雑なビジネスルールを正確に、かつ分かりやすくモデル化できます。
-   **マイクロサービスアーキテクチャ**は、巨大なシステムを、ビジネスの関心事ごとに分割された小さなサービスの集合体として構築するアプローチです。各サービスは独立して開発・デプロイできるため、開発のスピードと柔軟性が向上します。

この二つを組み合わせることで、私たちは金融ビジネスの複雑なドメインを適切に分割し、それぞれを自律的なマイクロサービスとして開発することが可能になるのです。

## 技術スタック紹介

このガイドでは、以下のモダンな技術スタックを採用します。

-   **Java 17**: 長期サポート（LTS）バージョンであり、`record`型による不変なデータオブジェクトの簡潔な記述は、DDDの値オブジェクトと非常に相性が良いです。
-   **Spring Boot 3.x**: Javaにおけるマイクロサービス開発のデファクトスタンダード。迅速な開発と豊富なエコシステムが魅力です。
-   **MyBatis Framework**: SQLを直接記述できる柔軟性の高い永続化フレームワーク。複雑な金融系のクエリにも対応しやすいです。
-   **Spock Framework**: BDD（振る舞い駆動開発）スタイルのテストをGroovyで記述できるフレームワーク。可読性が高く、ビジネスの振る舞いをテストするのに適しています。
-   **Testcontainers**: Dockerコンテナを使って、本番環境と限りなく近い状態で結合テストを実施できるライブラリ。テストの信頼性を劇的に向上させます。
-   **Spring Cloud Contract**: マイクロサービス間のAPI仕様の齟齬を防ぐ「契約テスト」を支援するフレームワークです。

次の章では、これらの技術を使って構築するシステムの設計思想の核となる「オニオンアーキテクチャ」について学んでいきましょう。 
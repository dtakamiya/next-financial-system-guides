# Chapter 17: 用語集 (Glossary)

ドメイン駆動設計（DDD）は、独自の概念と用語体系を持っています。この用語集は、本ガイド全体で使われる重要なキーワードを定義し、チーム内の円滑なコミュニケーションを支援するための「ユビキタス言語」リファレンスです。

---

### あ行

- **アプリケーションサービス (Application Service)**
  - UI層からのリクエストを受け、ドメインオブジェクト（集約）を協調させて特定のユースケースを実現する責務を持つ層。トランザクションの境界もこの層で管理されることが多い。「どのように(How)」を実現する。

- **値オブジェクト (Value Object)**
  - IDを持たず、その属性の値によってのみ定義される不変の（Immutable）オブジェクト。システムの正確性と安全性を高める。例：`Money`（金額）、`Term`（期間）。

- **エンティティ (Entity)**
  - 一意なIDによって識別され、ライフサイクルを通じて状態が変化する可変のオブジェクト。例：`Customer`（顧客）、`Account`（口座）。

- **オーケストレーション型Saga (Orchestration-based Saga)**
  - 分散トランザクションを実現するSagaパターンのうち、中央の「オーケストレーター」が各サービスへの指示（コマンド発行）と、その結果（イベント受信）を管理する方式。プロセスの全体像が把握しやすい利点がある。

- **オニオンアーキテクチャ (Onion Architecture)**
  - ビジネスの核となるドメインモデルを中央に置き、依存性の方向を常に内側に向けることで、ドメインロジックを技術的詳細（UI、DB、外部API）から保護するアーキテクチャスタイル。クリーンアーキテクチャの一種。

### か行

- **クリーンアーキテクチャ (Clean Architecture)**
  - 関心の分離と依存性逆転の原則を徹底し、ビジネスルール（ドメイン）をシステムの中心に据えるソフトウェア設計思想。特定のフレームワークや技術からの独立性を高める。

- **契約テスト (Contract Testing)**
  - マイクロサービス間のAPI仕様（契約）が守られていることを保証するためのテスト。Consumer（利用者）が期待するI/Oを定義し、Provider（提供者）がそれを満たしているかを継続的に検証する。

- **結果整合性 (Eventual Consistency)**
  - 分散システムにおいて、ある時点ではデータの不整合が生じる可能性があるが、最終的には（Eventually）全てのレプリカが一貫性のある状態に収束するという性質。ドメインイベントを介した非同期通信で採用される。

- **コレオグラフィ型Saga (Choreography-based Saga)**
  - 分散トランザクションを実現するSagaパターンのうち、中央の調整役を置かず、各サービスがイベントを発行・購読することで自律的に連携する方式。サービス間の結合度が低い利点がある。

### さ行

- **サブドメイン (Subdomain)**
  - ビジネス全体を表す大きなドメインを、特定の関心事に基づいて分割した小さな領域。「コア（Core）」「支援（Supporting）」「汎用（Generic）」の３つに分類される。

- **集約 (Aggregate)**
  - 関連するエンティティと値オブジェクトをまとめた、データ整合性の単位であり、トランザクションの境界。必ず集約ルート（Aggregate Root）を通して操作される。

- **集約ルート (Aggregate Root)**
  - 集約の代表となるエンティティ。外部から集約内のオブジェクトを操作する際の唯一の窓口となる。リポジトリは集約ルート単位でオブジェクトを取得・保存する。

- **Spock Framework**
  - JavaおよびGroovyアプリケーションのためのテストフレームワーク。BDD（振る舞い駆動開発）スタイルで記述でき、高い表現力と可読性を持つ。

### た行

- **ドメイン (Domain)**
  - ソフトウェアが解決しようとしているビジネス上の問題領域。

- **ドメインイベント (Domain Event)**
  - ドメイン内で起きた重要な「過去の出来事」を表す不変のオブジェクト。サービス間の疎結合な連携や、結果整合性の実現に用いられる。例：`LoanApplicationSubmitted`（ローン申請が提出された）。

- **ドメイン駆動設計 (Domain-Driven Design; DDD)**
  - ドメインエキスパートと開発者が協力し、ビジネスドメインのモデルをソフトウェアの設計の中心に据える開発アプローチ。複雑なドメインの問題解決に適している。

- **ドメインサービス (Domain Service)**
  - 特定のエンティティや値オブジェクトに自然に属さない、純粋なドメインロジックをカプセル化するコンポーネント。複数の集約を操作するロジックなどが配置される。ステートレスであることが多い。「何を(What)」を実現する。

- **Testcontainers**
  - Dockerコンテナをプログラム（JUnitなど）から制御し、テスト実行時にDBやメッセージブローカーなどを起動できるJavaライブラリ。信頼性の高いインフラ層の結合テストを実現する。

### は行

- **貧血ドメインモデル (Anemic Domain Model)**
  - DDDにおける代表的なアンチパターン。ドメインオブジェクトがデータ（ゲッター/セッター）しか持たず、ビジネスロジックがすべてサービスクラスに書かれてしまっている状態。手続き型の設計に陥りやすい。

- **不変 (Immutable)**
  - 一度作成された後、その状態を変更できないというオブジェクトの性質。値オブジェクトの重要な特性であり、システムの安全性を高める。

- **防護層 (Anti-Corruption Layer; ACL)**
  - モダンなシステムとレガシーシステム、または異なる境界づけられたコンテキスト間を連携させる際に、一方のドメインモデルが他方に汚染されるのを防ぐための変換層。

- **BFF (Backend for Frontend)**
  - クライアント（Web、モバイルなど）ごとに最適化されたAPIを提供するサーバーサイドコンポーネント。APIゲートウェイがこの役割を担うことが多い。クライアントの要求に応じて、複数のマイクロサービスからの情報を集約・加工して返す。

- **境界づけられたコンテキスト (Bounded Context)**
  - DDDの戦略的設計における最も重要な概念。特定のドメインモデルが適用される、明確な境界のこと。この境界内では、ユビキタス言語が一貫した意味を持つ。マイクロサービスの境界を決定する際の強力な指針となる。

### や行

- **ユビキタス言語 (Ubiquitous Language)**
  - DDDにおいて、ドメインエキスパートと開発チームが共通で使う、曖-昧さのない厳密に定義された言語。この言語がそのままコード上のクラス名やメソッド名に反映されることで、ビジネス要件とソフトウェア実装の間の乖離を防ぐ。

### ら行

- **リポジトリ (Repository)**
  - ドメインオブジェクトの永続化を抽象化するコンポーネント。アプリケーションは、まるでオブジェクトがメモリ上のコレクションにあるかのように、リポジトリを通じてオブジェクトを取得・保存できる。

### A-Z

- **APIゲートウェイ (API Gateway)**
  - システムへのすべてのリクエストを受け付ける単一のエントリポイント。リクエストのルーティング、認証、ロギングといった横断的関心事を一元的に処理する。

- **CQRS (Command Query Responsibility Segregation)**
  - システムの責務を、状態を変更する「コマンド」側と、状態を参照する「クエリ」側に明確に分離する設計パターン。それぞれの目的に応じて、モデルやデータストアを最適化できる。 